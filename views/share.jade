extends layout

block content
  #joinGame.content
    .card
      .item.item-divider Share URL or Code
      .item.item-text-wrap
        .item.item-input-inset
          label.item-input-wrapper
            input#copyCode(style="width: 100%;padding-left: 0px;padding-top: 1px;" type="text", value=domain_url+"/join/"+code)
          button#copyBtn.button.button-small.button-positive Copy
    .card
      .item.item-divider Players in the room 1 of #{num_players}
      .item.item-text-wrap
        ul#players.list
  #game.content(style="display: none;")
    a.button.button-block.button-calm( href=domain_url+"/game/"+code+"/#{player.id}")=player.nickname
    .card
      pre#gameInfo

  script.
    $( "#copyBtn" ).on( "click", function() {
      $('#copyCode').select();
      document.execCommand('copy'); // or 'cut'
    });
  script.
    var socket = io.connect(window.location.host);
                // red    // green  // yellow // blue   // pulpure // aqua  // gray   //  black
    var colors = ['#ff5454','#54ff54','#ffff54','#5454ff','#ff54ff','#54ffff','#686868','#000000'];

    socket.emit('joinPlayer',{gameCode: "#{code}" , playerID : '#{player.id}'});
    socket.on('joinPlayer', function (data) {
      $('#players').empty();
      for(var i=0; i<data.players.length;i++){
        $('#players').append('<li class="item">'+data.players[i].nickname+'</li>')
      }
    });
    socket.on('gotoGame',function(data){
      // window.location = "/game/"+data.game.code;
      $('#gameInfo').text(JSON.stringify(data.game,1,' '));
      $('#joinGame').hide();
      $('#game').show();
    });

    socket.on('background',function(data){
      $('body').css("background-color",colors[data.colorNum]);
    });
